<!DOCTYPE html>
<html lang="en">
  <head>
    <!-- Required meta tags -->
    <meta charset="utf-8" />
    <meta
      name="viewport"
      content="width=device-width, initial-scale=1, shrink-to-fit=no"
    />
    <link rel="icon" href="/favicon.ico" type="image/x-icon" />
    <link rel="shortcut icon" href="/favicon.ico" type="image/x-icon" />
    <!-- Bootstrap CSS -->
    <link
      rel="stylesheet"
      href="https://cdn.jsdelivr.net/npm/bootstrap@4.5.3/dist/css/bootstrap.min.css"
      integrity="sha384-TX8t27EcRE3e/ihU7zmQxVncDAy5uIKz4rEkgIXeMed4M0jlfIDPvg6uqKI2xXr2"
      crossorigin="anonymous"
    />
    <!-- Font Awesome CSS -->
    <link
      href="//maxcdn.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css"
      rel="stylesheet"
    />
    <link href="/mystyle.css" rel="stylesheet" />

    <!-- Optional JavaScript -->
    <!-- jQuery first, then Popper.js, then Bootstrap JS -->
    <script
      src="https://code.jquery.com/jquery-3.5.1.js"
      integrity="sha256-QWo7LDvxbWT2tbbQ97B53yJnYU3WhH/C8ycbRAkjPDc="
      crossorigin="anonymous"
    ></script>
    <script
      src="https://cdn.jsdelivr.net/npm/popper.js@1.16.1/dist/umd/popper.min.js"
      integrity="sha384-9/reFTGAW83EW2RDu2S0VKaIzap3H66lZH81PoYlFhbGU+6BZp6G7niu735Sk7lN"
      crossorigin="anonymous"
    ></script>
    <script
      src="https://cdn.jsdelivr.net/npm/bootstrap@4.5.3/dist/js/bootstrap.min.js"
      integrity="sha384-w1Q4orYjBQndcko6MimVbzY0tgp4pWB4lZ7lr30WKz0vr/aWKhXdBNmNb5D92v7s"
      crossorigin="anonymous"
    ></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery-cookie/1.4.1/jquery.cookie.js"></script>
    <!-- <script src="https://cdn.socket.io/socket.io-3.0.1.min.js"></script> -->

    <script src="/api.js"></script>


    <title>알파플라이의 게시판 | 게시글 목록</title>
    <style>
      .card {
        cursor: pointer;
      }

      html {
        overflow: auto;
      }
    </style>
  </head>


  <body>
    <nav
      class="navbar navbar-expand-sm navbar-dark bg-sparta justify-content-end"
    >
      <a class="navbar-brand" href="/articles.html">
        <img
          src="/logo_big_tr.png"
          width="30"
          height="30"
          class="d-inline-block align-top"
          alt=""
        />
        알파플라이의 게시판
      </a>
      <button
        class="navbar-toggler ml-auto"
        type="button"
        data-toggle="collapse"
        data-target="#navbarSupportedContent"
        aria-controls="navbarSupportedContent"
        aria-expanded="true"
        aria-label="Toggle navigation"
      >
        <span class="navbar-toggler-icon"></span>
      </button>
      <div class="navbar-collapse collapse flex-grow-0 ml-auto" id="navbarSupportedContent">        
      </div>
    </nav>

    <div class="wrap">     
      <button type="button" class="btn btn-outline-secondary" onclick="location.href='/write.html'" >글 작성하기</button>
    
      <div class = "user" style="float:right;">
        <button type="button" class="btn btn-outline-secondary" onclick="location.href='/login.html'" >로그인</button>
        <button type="button" class="btn btn-outline-secondary" onclick="location.href='/register.html'">회원가입</button>
        <button type="button" class="btn btn-outline-secondary" onclick="signOut()">로그아웃</button>
      </div>

      <div id="ArticleList" class="mb-5"></div>      

    </div>
  </body>
    
  <script>
      
      $(document).ready(function () {
        getArticles(function (articles) { //안되면 인자 null 추가
          for (let i = 0; i < articles.length; i++) {
            make_card(articles[i]);
          }
        });       
      });

      function make_card(item) {
        let date = new Date(item["date"]).toLocaleString();                
        let htmlTemp = `<div class="card" id="card" style="width: 40rem;" onclick="location.href='/detail.html?articleId=${item["articleId"]}'">
                        <div class="card-header">
                        ${item["title"]}
                        </div>
                        <ul class="list-group list-group-flush">
                        <li class="list-group-item">${item["user"]}</li>
                        <li class="list-group-item">${date}</li>                        
                        </ul>
                        </div>`                       
        $("#ArticleList").append(htmlTemp);
      }
    
  </script>
  
</html>
